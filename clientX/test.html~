<!DOCTYPE html>
<html lang="en">
<head>
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Libsodium.js Example</title>
</head>
<body>
  <script src="./dependencies/sodium.js"></script>
  <script>
    async function runLibsodiumExample() {
      // Load libsodium.js
      await sodium.ready;

      // Generate keypair
      const keypair = sodium.crypto_box_keypair();

      // Asymmetrically encode a message
      const message = "Hello, Libsodium.js!";
      const nonce = sodium.randombytes_buf(sodium.crypto_box_NONCEBYTES);
      const encryptedMessage = sodium.crypto_box_seal(message, keypair.publicKey);

      // Log the encoded message
      console.log("Encoded Message:", encryptedMessage);

      // Decode the message using the public key
      const decryptedMessage = sodium.crypto_box_seal_open(encryptedMessage, keypair.publicKey, keypair.privateKey);

      // Log the decoded message
      console.log("Decoded Message:", decryptedMessage);

      // Sign a message using the private key
      const signature = sodium.crypto_sign_detached(message, keypair.privateKey);

      // Verify the signature using the public key
      const isValidSignature = sodium.crypto_sign_verify_detached(signature, message, keypair.publicKey);

      // Log the signature and verification result
      console.log("Signature:", signature);
      console.log("Signature Verification Result:", isValidSignature);
    }

    // Run the example when the page loads
    runLibsodiumExample();
  </script>
</body>
</html>
